<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Painel - Loja</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #f5f5f5; height: 100vh; overflow: hidden; }
        
        .admin-container { display: flex; height: 100vh; }
        
        /* SIDEBAR */
        .sidebar { width: 280px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 0; box-shadow: 2px 0 10px rgba(0,0,0,0.1); }
        .sidebar-header { padding: 30px 20px; text-align: center; border-bottom: 1px solid rgba(255,255,255,0.2); }
        .sidebar-header h1 { font-size: 1.5rem; margin-bottom: 5px; }
        .sidebar-header p { opacity: 0.8; font-size: 0.9rem; }
        
        .sidebar-menu { padding: 20px 0; }
        .menu-item { display: flex; align-items: center; padding: 15px 25px; cursor: pointer; transition: all 0.3s ease; border-left: 4px solid transparent; }
        .menu-item:hover { background: rgba(255,255,255,0.1); }
        .menu-item.active { background: rgba(255,255,255,0.2); border-left-color: #25D366; }
        .menu-item i { font-size: 1.2rem; margin-right: 15px; width: 20px; }
        .menu-item span { font-weight: 500; }
        
        /* MAIN CONTENT */
        .main-content { flex: 1; display: flex; flex-direction: column; }
        .content-header { background: white; padding: 20px 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .content-header h2 { color: #333; font-size: 1.8rem; }
        .content-header p { color: #666; margin-top: 5px; }
        
        .content-body { flex: 1; padding: 30px; overflow-y: auto; }
        .content-section { display: none; }
        .content-section.active { display: block; }
        
        /* CARDS */
        .card { background: white; border-radius: 12px; padding: 25px; margin-bottom: 25px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); }
        .card h3 { color: #333; margin-bottom: 20px; font-size: 1.3rem; }
        
        /* FORMS */
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 600; color: #333; }
        .form-group input, .form-group textarea, .form-group select { width: 100%; padding: 12px 15px; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 1rem; transition: border-color 0.3s ease; }
        .form-group input:focus, .form-group textarea:focus { border-color: #25D366; outline: none; }
        
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        
        /* BUTTONS */
        .btn { padding: 12px 24px; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 1rem; transition: all 0.3s ease; margin-right: 10px; }
        .btn-primary { background: #25D366; color: white; }
        .btn-primary:hover { background: #128C7E; transform: translateY(-2px); }
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #545b62; }
        .btn-danger { background: #dc3545; color: white; }
        .btn-danger:hover { background: #c82333; }
        .btn-outline { background: transparent; border: 2px solid #25D366; color: #25D366; }
        .btn-outline:hover { background: #25D366; color: white; }
        
        /* PRODUCT LIST */
        .product-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .product-card { background: #f8f9fa; border-radius: 12px; padding: 20px; border: 2px solid #e9ecef; transition: all 0.3s ease; }
        .product-card:hover { border-color: #25D366; transform: translateY(-5px); }
        .product-card h4 { color: #333; margin-bottom: 10px; }
        .product-card .price { font-size: 1.3rem; font-weight: bold; color: #25D366; margin: 10px 0; }
        .product-card p { color: #666; margin-bottom: 15px; font-size: 0.9rem; }
        .product-card img { width: 100%; height: 150px; object-fit: cover; border-radius: 8px; margin-bottom: 15px; }
        
        /* CODE AREA */
        .code-area { background: #2d3748; color: #e2e8f0; padding: 20px; border-radius: 12px; font-family: 'Courier New', monospace; white-space: pre-wrap; max-height: 400px; overflow-y: auto; font-size: 0.9rem; line-height: 1.5; }
        
        /* STATS */
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: white; padding: 25px; border-radius: 12px; text-align: center; box-shadow: 0 4px 20px rgba(0,0,0,0.08); }
        .stat-number { font-size: 2.5rem; font-weight: bold; color: #25D366; }
        .stat-label { color: #666; margin-top: 5px; font-weight: 500; }
        
        .hidden { display: none; }
        
        /* RESPONSIVE */
        @media (max-width: 768px) {
            .sidebar { width: 250px; }
            .form-row { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <!-- SIDEBAR -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h1>üõ†Ô∏è Admin Painel</h1>
                <p>Gerencie sua loja</p>
            </div>
            
            <div class="sidebar-menu">
                <div class="menu-item active" onclick="showSection('dashboard')">
                    <i>üìä</i>
                    <span>Dashboard</span>
                </div>
                <div class="menu-item" onclick="showSection('produtos')">
                    <i>üì¶</i>
                    <span>Produtos</span>
                </div>
                <div class="menu-item" onclick="showSection('configuracoes')">
                    <i>‚öôÔ∏è</i>
                    <span>Configura√ß√µes</span>
                </div>
                <div class="menu-item" onclick="showSection('afiliados')">
                    <i>üí∞</i>
                    <span>Afiliados</span>
                </div>
                <div class="menu-item" onclick="showSection('exportar')">
                    <i>üì§</i>
                    <span>Exportar</span>
                </div>
                <div class="menu-item" onclick="showSection('ajuda')">
                    <i>‚ùì</i>
                    <span>Ajuda</span>
                </div>
            </div>
        </div>
        
        <!-- MAIN CONTENT -->
        <div class="main-content">
            <div class="content-header">
                <h2 id="sectionTitle">Dashboard</h2>
                <p id="sectionDescription">Vis√£o geral da sua loja</p>
            </div>
            
            <div class="content-body">
                <!-- DASHBOARD -->
                <div id="dashboard" class="content-section active">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="totalProducts">0</div>
                            <div class="stat-label">Produtos</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">156</div>
                            <div class="stat-label">Visualiza√ß√µes</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">23</div>
                            <div class="stat-label">Cliques WhatsApp</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">R$ 2.450</div>
                            <div class="stat-label">Vendas Estimadas</div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3>üöÄ A√ß√µes R√°pidas</h3>
                        <button class="btn btn-primary" onclick="showSection('produtos')">‚ûï Adicionar Produto</button>
                        <button class="btn btn-outline" onclick="showSection('exportar')">üì§ Exportar Loja</button>
                        <button class="btn btn-secondary" onclick="window.open('https://wa.me/5511914405349', '_blank')">üí¨ Suporte</button>
                    </div>
                </div>
                
                <!-- PRODUTOS -->
                <div id="produtos" class="content-section">
                    <div class="card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3>üì¶ Gerenciar Produtos</h3>
                            <button class="btn btn-primary" onclick="showAddProduct()">‚ûï Novo Produto</button>
                        </div>
                        <div id="productsList" class="product-list"></div>
                    </div>
                    
                    <!-- FORM PRODUTO -->
                    <div class="card hidden" id="productForm">
                        <h3 id="formTitle">‚ûï Novo Produto</h3>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label>Nome do Produto</label>
                                <input type="text" id="productName" placeholder="Ex: iPhone 15 Pro Max">
                            </div>
                            <div class="form-group">
                                <label>Pre√ßo (R$)</label>
                                <input type="number" id="productPrice" step="0.01" placeholder="0.00">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Descri√ß√£o</label>
                            <textarea id="productDescription" rows="3" placeholder="Descreva o produto..."></textarea>
                        </div>
                        
                        <!-- UPLOAD DE M√çDIA -->
                        <div class="form-group">
                            <label>üì∑ Foto do Produto</label>
                            <div class="upload-section">
                                <input type="file" id="productPhoto" accept="image/*" onchange="previewImage(this)" style="display: none;">
                                <div class="upload-area" onclick="document.getElementById('productPhoto').click()">
                                    <div id="imagePreview">
                                        <p>üì∑ Clique para fazer upload da foto</p>
                                        <small>JPG, PNG - M√°x 5MB</small>
                                    </div>
                                </div>
                                <div class="form-group" style="margin-top: 10px;">
                                    <label>Ou cole URL da imagem:</label>
                                    <input type="url" id="productImageUrl" placeholder="https://..." onchange="previewImageUrl(this)">
                                </div>
                            </div>
                        </div>
                        
                        <!-- UPLOAD DE V√çDEO -->
                        <div class="form-group">
                            <label>üé• V√≠deo do Produto (Opcional)</label>
                            <div class="upload-section">
                                <input type="file" id="productVideo" accept="video/*" onchange="previewVideo(this)" style="display: none;">
                                <div class="upload-area" onclick="document.getElementById('productVideo').click()">
                                    <div id="videoPreview">
                                        <p>üé• Clique para fazer upload do v√≠deo</p>
                                        <small>MP4, MOV - M√°x 50MB</small>
                                    </div>
                                </div>
                                <div class="form-group" style="margin-top: 10px;">
                                    <label>Ou cole URL do v√≠deo:</label>
                                    <input type="url" id="productVideoUrl" placeholder="https://youtube.com/..." onchange="previewVideoUrl(this)">
                                </div>
                            </div>
                        </div>
                        
                        <!-- LINKS DE AFILIADOS -->
                        <div class="form-group">
                            <label>üí∞ Links de Afiliados</label>
                            <div class="affiliate-links-form">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>üü° Shopee</label>
                                        <input type="url" id="linkShopee" placeholder="https://shopee.com.br/...">
                                    </div>
                                    <div class="form-group">
                                        <label>üîµ Mercado Livre</label>
                                        <input type="url" id="linkML" placeholder="https://mercadolivre.com.br/...">
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>üü† Amazon</label>
                                        <input type="url" id="linkAmazon" placeholder="https://amazon.com.br/...">
                                    </div>
                                    <div class="form-group">
                                        <label>üî¥ AliExpress</label>
                                        <input type="url" id="linkAliexpress" placeholder="https://aliexpress.com/...">
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 25px;">
                            <button class="btn btn-primary" onclick="saveProduct()">üíæ Salvar Produto</button>
                            <button class="btn btn-secondary" onclick="cancelProduct()">‚ùå Cancelar</button>
                        </div>
                    </div>
                </div>
                
                <!-- CONFIGURA√á√ïES -->
                <div id="configuracoes" class="content-section">
                    <div class="card">
                        <h3>üè™ Dados da Loja</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Nome da Loja</label>
                                <input type="text" id="storeName" value="NovidadeSP">
                            </div>
                            <div class="form-group">
                                <label>WhatsApp (com c√≥digo do pa√≠s)</label>
                                <input type="text" id="whatsapp" value="5511914405349">
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="saveConfig()">üíæ Salvar Configura√ß√µes</button>
                    </div>
                </div>
                
                <!-- AFILIADOS -->
                <div id="afiliados" class="content-section">
                    <div class="card">
                        <h3>üí∞ IDs de Afiliados</h3>
                        <div class="form-group">
                            <label>ID Shopee</label>
                            <input type="text" id="affiliateShopee" value="novidadesp">
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>ID Mercado Livre</label>
                                <input type="text" id="affiliateML" value="novidadesp">
                            </div>
                            <div class="form-group">
                                <label>Tag Amazon</label>
                                <input type="text" id="affiliateAmazon" value="novidadesp-20">
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="saveAffiliates()">üíæ Salvar Afiliados</button>
                    </div>
                    
                    <div class="card">
                        <h3>üìã Links para Cadastro</h3>
                        <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                            <a href="https://shopee.com.br/affiliate" target="_blank" class="btn btn-outline">üü° Shopee Afiliados</a>
                            <a href="https://mercadolivre.com.br/afiliados" target="_blank" class="btn btn-outline">üîµ ML Afiliados</a>
                            <a href="https://associados.amazon.com.br" target="_blank" class="btn btn-outline">üü† Amazon Associados</a>
                        </div>
                    </div>
                </div>
                
                <!-- EXPORTAR -->
                <div id="exportar" class="content-section">
                    <div class="card">
                        <h3>üì§ Exportar C√≥digo da Loja</h3>
                        <p style="color: #666; margin-bottom: 20px;">Gere o c√≥digo HTML completo da sua loja para usar no GitHub.</p>
                        <button class="btn btn-primary" onclick="generateCode()">üîß Gerar C√≥digo</button>
                        <button class="btn btn-secondary hidden" onclick="copyCode()" id="copyBtn">üìã Copiar C√≥digo</button>
                        <div id="codeOutput" class="code-area hidden" style="margin-top: 20px;"></div>
                    </div>
                </div>
                
                <!-- AJUDA -->
                <div id="ajuda" class="content-section">
                    <div class="card">
                        <h3>‚ùì Como Usar</h3>
                        <ol style="line-height: 2; color: #666;">
                            <li>Configure os dados da loja em <strong>Configura√ß√µes</strong></li>
                            <li>Adicione produtos em <strong>Produtos</strong></li>
                            <li>Configure seus IDs de afiliados em <strong>Afiliados</strong></li>
                            <li>Gere o c√≥digo em <strong>Exportar</strong></li>
                            <li>Cole o c√≥digo no GitHub (arquivo index.html)</li>
                        </ol>
                    </div>
                    
                    <div class="card">
                        <h3>üÜò Suporte</h3>
                        <p style="color: #666; margin-bottom: 15px;">Precisa de ajuda? Entre em contato:</p>
                        <a href="https://wa.me/5511914405349" target="_blank" class="btn btn-primary">üí¨ WhatsApp</a>
                        <a href="mailto:contato@novidadesp.com.br" class="btn btn-secondary">üìß Email</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let products = [
            {
                nome: "iPhone 15 Pro Max",
                preco: 9999.99,
                imagem: "https://images.unsplash.com/photo-1592750475338-74b7b21085ab?w=300&h=300&fit=crop",
                descricao: "O mais avan√ßado iPhone j√° criado",
                shopee: "https://shopee.com.br/iphone-15-pro-max?affiliate_id=novidadesp",
                ml: "https://produto.mercadolivre.com.br/iphone-15-pro-max?affiliate=novidadesp",
                amazon: "https://amazon.com.br/iphone-15-pro-max?tag=novidadesp-20"
            }
        ];
        let editingIndex = -1;

        const sections = {
            dashboard: { title: 'Dashboard', desc: 'Vis√£o geral da sua loja' },
            produtos: { title: 'Produtos', desc: 'Gerencie o cat√°logo da sua loja' },
            configuracoes: { title: 'Configura√ß√µes', desc: 'Configure os dados da loja' },
            afiliados: { title: 'Afiliados', desc: 'Configure seus links de afiliados' },
            exportar: { title: 'Exportar', desc: 'Gere o c√≥digo da sua loja' },
            ajuda: { title: 'Ajuda', desc: 'Como usar o painel admin' }
        };

        function showSection(sectionName) {
            // Atualizar menu
            document.querySelectorAll('.menu-item').forEach(item => item.classList.remove('active'));
            event.target.closest('.menu-item').classList.add('active');
            
            // Atualizar conte√∫do
            document.querySelectorAll('.content-section').forEach(section => section.classList.remove('active'));
            document.getElementById(sectionName).classList.add('active');
            
            // Atualizar header
            document.getElementById('sectionTitle').textContent = sections[sectionName].title;
            document.getElementById('sectionDescription').textContent = sections[sectionName].desc;
        }

        function loadProducts() {
            const container = document.getElementById('productsList');
            container.innerHTML = '';
            
            products.forEach((product, index) => {
                const card = document.createElement('div');
                card.className = 'product-card';
                card.innerHTML = `
                    ${product.imagem ? `<img src="${product.imagem}" alt="${product.nome}">` : ''}
                    <h4>${product.nome}</h4>
                    <div class="price">R$ ${product.preco.toFixed(2)}</div>
                    <p>${product.descricao}</p>
                    <button class="btn btn-secondary" onclick="editProduct(${index})">‚úèÔ∏è Editar</button>
                    <button class="btn btn-danger" onclick="deleteProduct(${index})">üóëÔ∏è Excluir</button>
                `;
                container.appendChild(card);
            });
            
            // Atualizar contador
            document.getElementById('totalProducts').textContent = products.length;
        }

        function showAddProduct() {
            document.getElementById('productForm').classList.remove('hidden');
            document.getElementById('formTitle').textContent = '‚ûï Novo Produto';
            clearForm();
            editingIndex = -1;
        }

        function editProduct(index) {
            const product = products[index];
            document.getElementById('productForm').classList.remove('hidden');
            document.getElementById('formTitle').textContent = '‚úèÔ∏è Editar Produto';
            
            document.getElementById('productName').value = product.nome;
            document.getElementById('productPrice').value = product.preco;
            document.getElementById('productImage').value = product.imagem;
            document.getElementById('productDescription').value = product.descricao;
            document.getElementById('linkShopee').value = product.shopee;
            document.getElementById('linkML').value = product.ml;
            document.getElementById('linkAmazon').value = product.amazon;
            
            editingIndex = index;
        }

        function saveProduct() {
            const product = {
                nome: document.getElementById('productName').value,
                preco: parseFloat(document.getElementById('productPrice').value),
                imagem: document.getElementById('productImage').value,
                descricao: document.getElementById('productDescription').value,
                shopee: document.getElementById('linkShopee').value,
                ml: document.getElementById('linkML').value,
                amazon: document.getElementById('linkAmazon').value
            };

            if (editingIndex >= 0) {
                products[editingIndex] = product;
            } else {
                products.push(product);
            }

            loadProducts();
            cancelProduct();
            alert('‚úÖ Produto salvo!');
        }

        function deleteProduct(index) {
            if (confirm('Excluir este produto?')) {
                products.splice(index, 1);
                loadProducts();
                alert('‚úÖ Produto exclu√≠do!');
            }
        }

        function cancelProduct() {
            document.getElementById('productForm').classList.add('hidden');
            clearForm();
        }

        function clearForm() {
            document.getElementById('productName').value = '';
            document.getElementById('productPrice').value = '';
            document.getElementById('productImage').value = '';
            document.getElementById('productDescription').value = '';
            document.getElementById('linkShopee').value = '';
            document.getElementById('linkML').value = '';
            document.getElementById('linkAmazon').value = '';
        }

        function saveConfig() {
            alert('‚úÖ Configura√ß√µes salvas!');
        }

        function saveAffiliates() {
            alert('‚úÖ Afiliados salvos!');
        }

        function generateCode() {
            const storeName = document.getElementById('storeName').value;
            const whatsapp = document.getElementById('whatsapp').value;
            
            const productsHtml = products.map(produto => 
                `            <div class="product">
                ${produto.imagem ? `<img src="${produto.imagem}" alt="${produto.nome}">` : ''}
                <h3>${produto.nome}</h3>
                <div class="price">R$ ${produto.preco.toFixed(2)}</div>
                <p>${produto.descricao}</p>
                <button class="whatsapp-btn" onclick="abrirWhatsApp('${produto.nome}', ${produto.preco}, '${produto.shopee}', '${produto.ml}', '${produto.amazon}')">
                    üí¨ Comprar via WhatsApp
                </button>
            </div>`
            ).join('\n');

            const code = `<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${storeName} - Loja WhatsApp</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { background: rgba(255,255,255,0.95); color: #333; padding: 2rem; text-align: center; border-radius: 15px; margin-bottom: 2rem; }
        .product-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .product { background: white; border-radius: 15px; padding: 20px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); }
        .product img { width: 100%; height: 200px; object-fit: cover; border-radius: 10px; margin-bottom: 15px; }
        .product h3 { color: #333; margin-bottom: 10px; }
        .product .price { font-size: 1.5rem; font-weight: bold; color: #25D366; margin: 10px 0; }
        .product p { color: #666; margin-bottom: 15px; }
        .whatsapp-btn { background: #25D366; color: white; padding: 12px 24px; border: none; border-radius: 25px; font-weight: bold; cursor: pointer; width: 100%; margin-top: 10px; }
        .whatsapp-btn:hover { background: #128C7E; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üõçÔ∏è ${storeName}</h1>
            <p>Loja Virtual Integrada com WhatsApp Business</p>
        </div>

        <div class="product-grid">
${productsHtml}
        </div>
    </div>

    <script>
        function abrirWhatsApp(nome, preco, shopee, ml, amazon) {
            const mensagem = \`üõçÔ∏è *\${nome}*

üí∞ *Pre√ßo: R$ \${preco.toFixed(2)}*

üì± *Onde comprar:*
üü° Shopee: \${shopee}
üîµ Mercado Livre: \${ml}
üü† Amazon: \${amazon}

üìû *D√∫vidas? Chama no WhatsApp!*\`;
            
            const url = \`https://wa.me/${whatsapp}?text=\${encodeURIComponent(mensagem)}\`;
            window.open(url, '_blank');
        }
    </script>
</body>
</html>`;

            document.getElementById('codeOutput').textContent = code;
            document.getElementById('codeOutput').classList.remove('hidden');
            document.getElementById('copyBtn').classList.remove('hidden');
        }

        function copyCode() {
            const code = document.getElementById('codeOutput').textContent;
            navigator.clipboard.writeText(code).then(() => {
                alert('üìã C√≥digo copiado! Cole no GitHub.');
            });
        }

        // Inicializar
        loadProducts();
    </script>
</body>
</html>